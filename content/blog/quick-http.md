---
title: HTTPをさくっと学ぶ
date: 2020-01-01
authors:
  - name: あやき
    link: https://x.com/ayaki2325
    image: https://pbs.twimg.com/profile_images/1958533086771314689/lutI-pc-_400x400.jpg
tags:
  - HTTP
  - ネットワーク
  - さくっと学ぶ
---

## はじめに

バックエンドエンジニアにとってHTTPの知識は重要です。  
一方で、全員が今すぐにRFCや重厚な専門書を読み始める必要はありません。  
**短時間で概要を掴むことが今求められている人**もいるはずです。

そういった人に向けて書きました。

本記事のゴールは、**HTTPがどういうものなのかイメージできるようになる**ことです。  
これを達成することで、今後HTTP関連でつまづいた際に「何がなんだかわからない」とならず、自力で状況を改善する一手が打てるようになるはずです。  
たとえば、生成AIに適切な質問を投げられたり、専門書やWebページから必要な情報を抽出できたり、といったことを期待しています。

なお、解説するHTTPのバージョンは1.1です。

## HTTPとは

HTTPとはHypertext Transfer Protocolの略で、**Web上でリソースの表現をクライアントとサーバー間でやりとりするためのプロトコル**です。

リソースとは、Web上で名前を持つ様々な情報です。  
たとえば、群馬県の天気予報などです。

リソースの表現とは、クライアントとサーバー間でやりとりする具体的なデータです。  
たとえば、群馬県の天気予報リソースをHTML形式で記述した文字列などです。

アーキテクチャスタイルとしてクライアント・サーバーを採用しています。

Webブラウザなどのクライアントがリクエストを送信して、Webサーバーからのレスポンスを受信するというスタイルです。

```mermaid
sequenceDiagram
  participant C as クライアント
  participant S as サーバー

  C->>S: リクエスト
  S->>C: レスポンス
```

## URI

リソースはURIというものを使って指し示すことができます。  
URIとはUniform Resource Identifierの略で、**リソースを識別するための統一されたID**です。

今はURLと同じようなものという理解で問題ないです。  
URIとURLの違いについてはこのセクションの最後で触れます。

### 構文

URIは複数の要素からなっています。

まずはこのページのURIを見てみましょう。

```
https://backend-engineer-road.com/blog/quick-http/
```

このURIを構成する要素は以下のようになります。

| 要素名      | 説明                               | 例                          |
| ----------- | ---------------------------------- | --------------------------- |
| URIスキーム | 利用するプロトコル                 | `https`                     |
| ホスト名    | ドメイン名かIPアドレス             | `backend-engineer-road.com` |
| パス        | ホスト内のリソースを一意に指し示す | `/blog/quick-http/`         |

これらがURIを構成するすべての要素ではありません。  
実は他にも要素があります。  
もう少し複雑なURIを見てみましょう。

```
http://ayaki:password@localhost:1313/news?page=2&mode=dark#no3
```

初見の要素は以下のようになります。

| 要素名             | 説明                                                     | 例                  |
| ------------------ | -------------------------------------------------------- | ------------------- |
| ユーザー情報       | アクセスするのに使うユーザー名とパスワード               | `ayaki:password`    |
| ポート番号         | 省略した場合は利用するプロトコルのデフォルト値が使われる | `1313`              |
| クエリパラメーター | サーバーに対して任意のパラメーターを渡す                 | `?page=2&mode=dark` |
| URIフラグメント    | リソース内のさらに細かい部分を特定                       | `#no3`              |

### 文字

URIのパスには**ASCII文字**しか使えません。  
具体的には以下です。

- **アルファベット**: A-Za-z
- **数字**: 0-9
- **記号**: -.~:@!$&'()

これら以外の文字を使いたい場合は **%エンコード**という手法を使う必要があります。  
たとえば「あ」をUTF-8で%エンコードすると「%E3%81%82」になります。  
これは「あ」がUTF-8で「0xE3 0x81 0x82」の3バイトからなることに起因します。

> [!NOTE]
> ブラウザのアドレスバーに日本語を含んだURIを書いてアクセスすることができますが、クライアントとサーバー間では%エンコードされた値をやりとりします。

また、同じ「あ」でも文字コードによってバイト列が変化するので、クライアントとサーバーで文字コードが異なると予期せぬ結果になりうるので注意が必要です。  
基本的にUTF-8を使うようにすればOKです。

### URIとURLの違い

**URIはURLとURNの総称**です。  
つまり、URLはURIの一部です。

URNを使うことはあまりないため、URIとURLをだいたい同じようなものとして捉えてよいという説明にしました。  
URNについて詳しく知りたい人は[Uniform Resource Name - Wikipedia](https://ja.wikipedia.org/wiki/Uniform_Resource_Name)を読んでください。

## 参考文献

- [Webを支える技術](https://gihyo.jp/book/2010/978-4-7741-4204-3)
